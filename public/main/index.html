<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="index.css">
  </head>
  <body>
    <title>üê∏ Client Predictions</title>
    <p>
      <!--  <div id="app_basic" v-bind:title="message" class="experiment-block">{{ randNum }}</div> -->
      <div style="text-align: center;" id = "app">
        <!-- Rendering data to DOM -->
        <h1 style="color: seagreen;">{{title}}</h1>
        <h3>{{timestamp}}</h1>
<h3>{{predictionValues}}</h3>
<h3>Users: {{connected_users}} ID: {{socket_id}} OSC Sockets: {{osc_clients}}</h3>
<h3>In OSC: {{osc_show}}</h3>
<!-- Calling function in methods -->
<button v-on:click=showData()>Show Prediction Vals</button>
<button v-on:click=id()>Show ID</button>
<button v-on:click=osc_out()>emit OSC</button>
<button v-on:click=osc_client_number()>OSC Clients</button>
</div>

<a href="https://www.theguardian.com/environment/2022/nov/07/toad-licking-us-national-park-hallucinogen">Lick the toad from the web</a>
<br>
<a href="https://periodicos.unespar.edu.br/index.php/vortex/article/download/4695/3213/12644">Information about the project</a>
<br>
<a href="https://konvas.netlify.app/">Information about the author</a>
</p>
<button id="random-url" onclick="randomURL()"> Some Random Info </button>
<div id="sketch-holder">

  <!-- AngularJS Material CSS now available via Google CDN; version 1.2.1 used here -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- ml5 -->
  <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>

  <!-- p5 -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js" integrity="sha512-WJXVjqeINVpi5XXJ2jn0BSCfp0y80IKrYh731gLRnkAS9TKc5KNt/OfLtu+fCueqdWniouJ1ubM+VI/hbo7POQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <link rel=‚Äúshortcut icon‚Äù href=‚Äú#‚Äù/>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <!--  <script src="/CCapture.all.min.js"></script> -->
  <script src="https://unpkg.com/tone"></script>


  <input type="text" placeholder="type d on your keyboard to start training" />
  <!-- <script src="/react-button.js"></script> -->

  <!-- <script src="/socket.io.min.js" type="text/javascript"></script> -->

  <!-- FOR deployment -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.js" integrity="sha512-YeeA/Qxn5hYdkukScTCNNOhTrv1C2RubAGButJ1rmgQwZf/HdRaCGl+JAVkqsqaNRaYNHdheiuKKuPf9mDcqKg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/osc@2.4.3/dist/osc-browser.min.js" integrity="sha256-e+7BCrzZ6gEVwD6HyqBNokg464MSfp339nTsew0mNCU=" crossorigin="anonymous"></script>

  <!-- <script src="/socket.io/socket.io.js"></script>
  <script src="/osc-browser.min.js" type="text/javascript"></script> -->
  <script src="neuralNet.js" type="text/javascript"></script>
  <script src="sound.js" type="text/javascript"></script>
  <script src="osc-sc.js" type="text/javascript"></script>
  <script src="randomLinkScript.js" type="text/javascript"></script>

  <script type="text/javascript">
    
    console.log('ml5 version:', ml5.version);
    window.addEventListener("beforeunload", function (e) {
      var confirmationMessage = 'You leaving??'
      (e || window.event).returnValue = confirmationMessage;
      return confirmationMessage;
    })

    $( document ).ready(function() {

      /*$('button').on('click', function() {
        $('input').focus();
        });*/

      $('select').on('change', function() {
        $('input').focus();
      })
    })

    socket = io()

    new Vue({
      el: "#app",
      data: {
        title: "üê∏ LICK THE TOAD üê∏",
        timestamp: `Date/time: ${new Date().toLocaleString()}`,
        predictionValues: "",
        socket_id: "welcome",
        connected_users: 0,
        osc_show: {},
        osc_clients: 0
      },
      methods: {
        showData (message) {
          this.predictionValues = msg;
        },
        id () {
          this.socket_id = socket.id
        },
        osc_out () {
          oscPort.send({
            address: `/${this.socket_id}`,
            args: JSON.stringify(this.predictionValues)
          })
        },
        osc_in () {
          oscPort.on('message', (oscMsg) => {
            this.osc_show = oscMsg
          })
        },
        osc_client_number () {
          this.osc_clients = this.connected_users
        }
      },
      created () {
        socket.on('newclientconnect', (data) => {
          this.connected_users = data.guests 
        })
      },
      mounted () {
        this.$nextTick(this.osc_out())
        this.$nextTick(this.osc_in())
      }
    });  


    /*var capturer = new CCapture( {
      format: 'webm',
      framerate: 60,
      verbose: true
      })*/

    /* async function keyPressed(){
       if (key == 'q') {
       capturer = new CCapture( {
       verbose: false,
       display: true,
       framerate: 30,
       motionBlurFrames: ( 960 / 30 ),
       quality: 99,
       format: 'webm',
       workersPath: '../../src/',
       timeLimit: 4,
       frameLimit: 0,
       autoSaveTime: 0,
       onProgress: function( p ) { progress.style.width = ( p * 100 ) + '%' }
       })

       capturer.start();
       }

       else if (key == 'w') {
       capturer.stop();
       capturer.save();
       }
       }

       render()
    */

  </script>
  <button id="start-audio" onclick="startAudio()">  Start Audio </button>
  <button id="pause-play" onclick="playDrone()"> Drone </button>
  <button id="play-pat" onclick="playPattern()">Patterns</button>
  <button id="update-harmx" onclick="updateHarmonics()"> Harmonics </button>

  <style>
    #app {
        font-family: Avenir, Helvetica, Arial, sans-serif, Roboto;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-align: center;
        color: #2c3e50;
        margin-top: 60px;
    }

    .v-enter-active,
    .v-leave-active {
        transition: opacity 2s ease, transform 1s ease-in-out;
        transform: translateY(0px);
    }

    .v-enter-from,
    .v-leave-to {
        opacity: 0;
        transform: translateY(100px);
    }
  </style>

</body>
</html>
